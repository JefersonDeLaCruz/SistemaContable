<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Discriminado - Sistema Contable</title>
  
</head>
<body>
    <div class="header">
        <h1>Dashboard Discriminado por Roles</h1>
        <div class="user-info">
            <span>Usuario: <strong th:text="${usuario.username}">Usuario</strong></span>
            <span class="role-badge" th:classappend="${'role-' + usuario.role.toLowerCase()}" th:text="${usuario.role}">ROL</span>
            <a href="/logout" class="logout-btn">Cerrar Sesi√≥n</a>
        </div>
    </div>

    <div class="container">
        <div class="back-link">
            <a href="/dashboard">‚Üê Volver al Dashboard Principal</a>
        </div>

        <div class="demo-info">
            <h3>Demostraci√≥n de Discriminaci√≥n de Usuarios</h3>
            <p><strong>Tu rol actual:</strong> <span th:text="${usuario.role}">ROL</span></p>
            <p>Los botones que puedes ver y usar dependen de tu rol. Intenta acceder a diferentes secciones:</p>
            <ul>
                <li><strong>ADMIN:</strong> Puede acceder a todas las secciones</li>
                <li><strong>CONTADOR:</strong> Solo puede acceder a funciones de contabilidad</li>
                <li><strong>AUDITOR:</strong> Solo puede acceder a funciones de auditor√≠a</li>
            </ul>
        </div>

        <div class="welcome-card">
            <h2>Bienvenido, <span th:text="${usuario.username}">Usuario</span></h2>
            <p>Email: <strong th:text="${usuario.email}">email@example.com</strong></p>
            <p>Rol: <span class="role-badge" th:classappend="${'role-' + usuario.role.toLowerCase()}" th:text="${usuario.role}">ROL</span></p>
        </div>

        <div class="buttons-container">
            <!-- Bot√≥n para ADMIN - Solo visible si el usuario es ADMIN -->
            <div th:if="${usuario.role == 'ADMIN'}">
                <a href="/discriminacion/admin" class="role-button btn-admin">
                    üëë Funciones de Admin
                    <br><small>Gesti√≥n completa del sistema</small>
                </a>
            </div>

            <!-- Bot√≥n para CONTADOR - Solo visible si el usuario es CONTADOR -->
            <div th:if="${usuario.role == 'CONTADOR'}">
                <a href="/discriminacion/contador" class="role-button btn-contador">
                    üìä Funciones de Contador
                    <br><small>Gesti√≥n contable y financiera</small>
                </a>
            </div>

            <!-- Bot√≥n para AUDITOR - Solo visible si el usuario es AUDITOR -->
            <div th:if="${usuario.role == 'AUDITOR'}">
                <a href="/discriminacion/auditor" class="role-button btn-auditor">
                    üîç Funciones de Auditor
                    <br><small>Revisi√≥n y control de calidad</small>
                </a>
            </div>
        </div>

        <!-- Informaci√≥n adicional sobre qu√© puede hacer cada rol -->
        <div class="demo-info">
            <h3>üß™ Prueba la Discriminaci√≥n</h3>
            <p>Para probar completamente la discriminaci√≥n:</p>
            <ol>
                <li>Crea usuarios con diferentes roles usando <a href="/admin/crear-usuario">Crear Usuario</a></li>
                <li>Cierra sesi√≥n y entra con cada usuario</li>
                <li>Observa c√≥mo cambian los botones disponibles</li>
                <li>Intenta acceder directamente a URLs como:</li>
                <ul>
                    <li><code>/discriminacion/admin</code> (solo ADMIN)</li>
                    <li><code>/discriminacion/contador</code> (solo CONTADOR)</li>
                    <li><code>/discriminacion/auditor</code> (solo AUDITOR)</li>
                </ul>
            </ol>
        </div>
    </div>
</body>
</html>